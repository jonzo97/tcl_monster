{
  "version": "1.0",
  "project": "tcl_monster (libero_bot on GitHub)",
  "last_updated": "2025-10-22T23:12:00Z",
  "current_phase": "Ready for Phase 2.2.2: Adapt MI-V Reference Design",

  "recent_accomplishments_this_session": [
    "Deleted PicoRV32, switched to Microchip MI-V cores",
    "Initialized Git repository: github.com:jonzo97/libero_bot",
    "Converted MI-V repos to git submodules (miv_polarfire_eval, miv_platform, miv_documentation)",
    "Updated .claude/CLAUDE.md with MI-V core documentation and instantiation patterns",
    "Created autonomous compaction framework with universal context-management skill",
    "Disabled project-specific slash commands in favor of semantic skill triggering"
  ],

  "active_files": [
    {
      "path": ".claude/CLAUDE.md",
      "purpose": "Project configuration with MI-V core documentation and compaction protocols",
      "status": "modified - added MI-V section and autonomous compaction framework"
    },
    {
      "path": "hdl/miv_polarfire_eval/",
      "purpose": "MI-V RV32 reference designs for MPF300 Eval Kit (1.4GB submodule)",
      "key_file": "Libero_Projects/PF_Eval_Kit_MIV_RV32_BaseDesign.tcl",
      "status": "cloned as git submodule"
    },
    {
      "path": "hdl/miv_platform/",
      "purpose": "MI-V platform HAL and peripheral drivers",
      "status": "cloned as git submodule (100 files)"
    },
    {
      "path": "hdl/miv_documentation/",
      "purpose": "MI-V user guides and driver documentation",
      "status": "cloned as git submodule"
    },
    {
      "path": "~/.claude/skills/context-management/SKILL.md",
      "purpose": "Universal context management skill - works across all projects",
      "triggers": "save context, compact, checkpoint, preserve context",
      "status": "created"
    }
  ],

  "architecture_decisions": [
    {
      "decision": "Use Microchip MI-V cores instead of third-party RISC-V cores (PicoRV32)",
      "rationale": "MI-V RV32 is a Libero IP catalog core (VLNV: Microsemi:MiV:MIV_RV32:3.1.200) that auto-downloads via create_and_configure_core -download_core. Complete reference designs available for MPF300 Eval Kit with peripherals.",
      "alternatives_considered": "PicoRV32 (open-source, 750-2k LUTs, no official support)",
      "impact": "All future RISC-V designs use MI-V cores. Reference at hdl/miv_polarfire_eval/Libero_Projects/",
      "key_file": "hdl/miv_polarfire_eval/Libero_Projects/import/components/MIV_RV32_CFG1_C0.tcl"
    },
    {
      "decision": "Create universal context-management skill instead of project slash commands",
      "rationale": "Skills work across ALL projects, sync via existing ~/.claude/ solution, trigger semantically (speech-to-text friendly)",
      "alternatives_considered": "Project-specific slash commands (not universal, require exact syntax)",
      "impact": "Natural phrases like 'let's save and compact' now work universally across all projects"
    },
    {
      "decision": "Defer Memory MCP configuration to tomorrow",
      "rationale": "Memory MCP server requires setup (npx install, --memory-path config). Currently using .mcp.json fallback which works adequately.",
      "alternatives_considered": "Set up now vs later",
      "impact": "Will switch to graph database tomorrow for better context preservation"
    }
  ],

  "mi_v_core_information": {
    "core_type": "Libero IP Catalog Core",
    "vlnv": "Microsemi:MiV:MIV_RV32:3.1.200",
    "download_method": "create_and_configure_core -download_core",
    "configurations": {
      "CFG1": "RV32IMC - M+C extensions, 32kB TCM, JTAG debug",
      "CFG2": "RV32IMC - Similar to CFG1, different memory map",
      "CFG3": "RV32IMCF - Adds floating-point extension"
    },
    "reference_design": "hdl/miv_polarfire_eval/Libero_Projects/PF_Eval_Kit_MIV_RV32_BaseDesign.tcl",
    "github_org": "https://github.com/Mi-V-Soft-RISC-V",
    "app_note": "AN4997 - PolarFire FPGA Building a Mi-V Processor Subsystem"
  },

  "known_issues": [
    "Memory MCP server not configured yet - using .mcp.json fallback (will fix tomorrow)",
    "Timing-driven P&R mode doesn't persist via TCL (see docs/lessons_learned/constraint_association.md)",
    "Report file paths in generate_reports.tcl don't match actual Libero output locations",
    "docs/RISCV_DDR_DESIGN.md needs updating - was based on PicoRV32, now using MI-V"
  ],

  "next_steps": [
    "Configure Memory MCP server tomorrow (npx @modelcontextprotocol/server-memory)",
    "Adapt MI-V reference design (PF_Eval_Kit_MIV_RV32_BaseDesign.tcl) for tcl_monster",
    "Study MI-V component configs in hdl/miv_polarfire_eval/Libero_Projects/import/components/",
    "Create .gitignore for Libero build artifacts (libero_projects/*/designer/, */synthesis/, etc.)",
    "Update docs/RISCV_DDR_DESIGN.md to reflect MI-V approach instead of PicoRV32",
    "Test counter design on MPF300 Eval Kit hardware"
  ],

  "context_notes_for_next_session": "MI-V core instantiation uses create_and_configure_core with -download_core. The complete reference design at hdl/miv_polarfire_eval/Libero_Projects/PF_Eval_Kit_MIV_RV32_BaseDesign.tcl shows full system with peripherals (UART, GPIO, Timers). Configuration files in import/components/ show exact parameters. CFG1 = RV32IMC with 32kB TCM at 50 MHz. Reference design is 1.4GB submodule with FlashPro programming files included."
}
